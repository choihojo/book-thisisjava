# 21.1 자바 21 버전에서 강화된 내용

## 21.1.1 강화된 언어 및 라이브러리 기능

- `로컬 (지역) 변수 타입 추론`: 생성자나 메서드에서 선언되는 로컬 (지역) 변수는 명시적 타입 대신 `var`을 사용해서 컴파일 시에 타입 추론을 할 수 있다. `var`을 사용하면 복잡한 코드가 간결해지지만 타입 정보가 없어져서 오히려 가독성이 떨어질 수도 있다. 개인적으로는 안 쓰는 게 더 마음에 든다.

- `switch 문의 null 처리 및 패턴 매칭`: 자바 17까지는 표현값이 null일 경우 switch 문에서 NullPointerException이 발생했다. 그러나 자바 21부터는 레이블에 null을 지정해서 예외를 발생시키지 않고 null 처리를 할 수 있게 되었다. 또한 레이블에 패턴과 가드를 작성해서 표현값과 매칭시킬 수도 있다.

- `레코드 패턴`: 자바 21에서 지원하는 레코드 패턴은 레코드의 필드값을 분해해서 변수에 대입하는 기능을 제공한다. 레코드의 필드값을 얻기 위해 Getter을 호출할 필요 없이 바로 매개변수로 받을 수 있어 매우 편리해졌다.

- `가상 스레드`: 자바 21부터 사용할 수 있는 가장 주목해야 할 기능은 가상 스레드이다. 가상 스레드는 처리량이 높은 동시 애플리케이션을 개발할 때 사용할 수 있는 경량 스레드이다.

- `순차 컬렉션`: 자바 21은 순서가 있는 컬렉션을 묶고 공통 API를 제공할 목적으로 `SequencedCollection`, `SequencedSet`, `SequencedMap` 인터페이스를 추가하고, 기존 인터페이스의 상속 관계를 수정했다.

- `기본 문자셋 변경`: 자바는 JVM이 실행될 때 운영체제 환경에 따라 자바 기본 문자셋이 결정되었다. macOS는 UTF-8을 기본 문자셋으로 사용했고, 한글 Windows에서는 x-windows-949 (MS949)를 사용했다. 자바 21에서는 자바 기본 문자셋이 UTF-8로 통일되었다. 이로써 운영체제 환경에 의존하지 않고 어떤 실행 환경에서는 모두 UTF-8 문자셋을 사용한다.
